<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li:not(:nth-child(12)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li > a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(2) > ul > li:nth-child(12) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(2) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(2) > ul > li:nth-child(12) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(2) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(2) > ul.nav-list > li.nav-list-item:nth-child(12) > ul.nav-list { display: block; } </style> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>1-3 Teams 배포 승인 메세지 | Just the Docs Template</title> <meta name="generator" content="Jekyll v4.3.3" /> <meta property="og:title" content="1-3 Teams 배포 승인 메세지" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="A starter template for a Jeykll site using the Just the Docs theme!" /> <meta property="og:description" content="A starter template for a Jeykll site using the Just the Docs theme!" /> <link rel="canonical" href="http://0.0.0.0:4000/docs/02_Tech/CICD/Jenkins/jenkins-notification-teams" /> <meta property="og:url" content="http://0.0.0.0:4000/docs/02_Tech/CICD/Jenkins/jenkins-notification-teams" /> <meta property="og:site_name" content="Just the Docs Template" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="1-3 Teams 배포 승인 메세지" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"A starter template for a Jeykll site using the Just the Docs theme!","headline":"1-3 Teams 배포 승인 메세지","url":"http://0.0.0.0:4000/docs/02_Tech/CICD/Jenkins/jenkins-notification-teams"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> Just the Docs Template </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/docs/00_Portfolio/portfolio.html" class="nav-list-link">Portfolio</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Languages category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/01_Languages" class="nav-list-link">Languages</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Java category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/01_languages/Java" class="nav-list-link">Java</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/01_languages/Java/Security6" class="nav-list-link">Security6</a> </li><li class="nav-list-item"> <a href="/docs/01_languages/Java/Security6" class="nav-list-link">Security6</a> </li></ul></li><li class="nav-list-item"><a href="/docs/01_languages/Markdown" class="nav-list-link">Markdown</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in TypeScript category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/01_languages/TypeScript" class="nav-list-link">TypeScript</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/01_Language/TypeScript/AwsCloudScape/awscloudscape" class="nav-list-link">AWS CloudScape Component</a> </li><li class="nav-list-item"> <a href="/docs/01_Language/TypeScript/AwsCloudScape/nextjs/learn-next-js" class="nav-list-link">Next.js</a> </li><li class="nav-list-item"> <a href="/docs/01_Language/TypeScript/AwsCloudScape/nextjs" class="nav-list-link">Next.js</a> </li><li class="nav-list-item"> <a href="/docs/01_Language/TypeScript/AwsCloudScape/nextjs/learn-next-js" class="nav-list-link">Next.js</a> </li><li class="nav-list-item"> <a href="/docs/01_Language/TypeScript/AwsCloudScape/react" class="nav-list-link">React</a> </li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Tech category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/02_Tech" class="nav-list-link">Tech</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in InteliJ category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/02_Tech/InteliJ" class="nav-list-link">InteliJ</a><ul class="nav-list"></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in AWS category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/02_Tech/AWS" class="nav-list-link">AWS</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/02_Tech/AWS/CloudFrontFunction" class="nav-list-link">1. CloudFront Function vs Lambda@Edge 비교</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/AWS/ECS/ecs-cluster-create" class="nav-list-link">1. ECS 구축하기</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/AWS/ECS" class="nav-list-link">1. ECS</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/AWS/Lambda@Edge" class="nav-list-link">1. Lambda@Edge 와 JWT Web Tokens</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/AWS/Lambda@Edge" class="nav-list-link">1. Lambda@Edge 와 JWT Web Tokens</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/AWS/ECS" class="nav-list-link">1. Network</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/AWS/CloudWatch/cloudwatch-alarm" class="nav-list-link">2. Cloud Watch Alarm</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/AWS/CloudWatch" class="nav-list-link">2. CloudWatch</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/AWS/ECS/ecs-capacity-provider" class="nav-list-link">2. ECS 용량공급자</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/AWS/APIGateway/RESTAPIGateway" class="nav-list-link">2. Cloud Watch Alarm</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/CICD/SAM" class="nav-list-link">2. SAM</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/CICD/Terramate" class="nav-list-link">2. Terramate</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/AWS/ElasticSearch" class="nav-list-link">3. Elastic Search</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/AWS/EventBridge" class="nav-list-link">3. EventBridge</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/AWS/CloudFront/Image-Resizing-S3-CF/image-resizing-s3-cf" class="nav-list-link">2. AWS S3, Lambda, API Gateway를 활용한 실시간 이미지 리사이징 솔루션</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/AWS/APIGateway/RESTAPIGateway/Image-Resizing-S3" class="nav-list-link">2. AWS S3, Lambda, API Gateway를 활용한 실시간 이미지 리사이징 솔루션</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/AWS/APIGateway" class="nav-list-link">5. API Gateway</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/AWS/CloudFront" class="nav-list-link">5. Amazon CloudFront</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/AWS/CloudFront" class="nav-list-link">5. Amazon CloudFront</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/AWS/CloudShell" class="nav-list-link">5. CloudShell</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/AWS/ElasticCache" class="nav-list-link">5. Elastic Cache</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/AWS/APIGateway/HTTPAPIGateway" class="nav-list-link">6. HTTP API Gateway</a> </li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in CICD category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/02_Tech/CICD" class="nav-list-link">CICD</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/02_Tech/InteliJ/Java" class="nav-list-link">1. Java</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/CICD/Jenkins" class="nav-list-link">1. Jenkins</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/CICD/Jenkins/jenkins-checkout-scm" class="nav-list-link">1-3. jenkins checkout</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/CICD/Jenkins/jenkins-checkout-scm" class="nav-list-link">1-3. jenkins checkout</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/CICD/Jenkins/jenkins-checkout-scm" class="nav-list-link">1-3. jenkins checkout</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/CICD/Jenkins/jenkins-checkout-scm" class="nav-list-link">1-3. jenkins checkout</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/CICD/Jenkins/jenkins-checkout-scm" class="nav-list-link">1-3. jenkins checkout</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/CICD/Jenkins/jenkins-checkout-scm" class="nav-list-link">1-3. jenkins checkout</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/CICD/Jenkins/jenkins-installation" class="nav-list-link">1-1. AWS EC2에서 Docker를 사용하여 Jenkins 배포하기</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/CICD/Jenkins/jenkins-checkout-scm" class="nav-list-link">1-3. jenkins checkout</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/CICD/Jenkins/jenkins-jcasc-installation" class="nav-list-link">1-2 Jenkins 설치하기 with JCASC</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/CICD/Jenkins/jenkins-notification-teams" class="nav-list-link">1-3 Teams 배포 승인 메세지</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/CICD/CircleCI" class="nav-list-link">2. CircleCI</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/CICD/CodePipeline" class="nav-list-link">2. CodePipeline</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/CICD/CDK/cdk-module-app" class="nav-list-link">2-1. TypeScript CDK로 재사용 가능한 모듈 구조 작성하기 (1편)</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/CICD/CDK/cdk-module-construct" class="nav-list-link">2-1. TypeScript CDK로 재사용가능한 모듈 구조 작성하기 - Construct (4편)</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/CICD/CDK/cdk-module-context" class="nav-list-link">2-1. TypeScript CDK로 재사용가능한 모듈 구조 작성하기 - App, Context (2편)</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/CICD/CDK/cdk-module-pipeline-pattern" class="nav-list-link">2-1. TypeScript CDK로 재사용가능한 모듈 구조 작성하기 - pipeline (5편)</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/CICD/CDK/cdk-module-pipeline-pattern" class="nav-list-link">2-1. TypeScript CDK로 재사용가능한 모듈 구조 작성하기 - pipeline (5편)</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/CICD/CDK/cdk-module-stack-advanced" class="nav-list-link">2-1. TypeScript CDK로 재사용가능한 모듈 구조 작성하기 - Stack Advanced (5편)</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/CICD/CDK/cdk-module-stack-advanced" class="nav-list-link">2-1. TypeScript CDK로 재사용가능한 모듈 구조 작성하기 - Stack Advanced (5편)</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/CICD/CDK/cdk-module-stack-advanced" class="nav-list-link">2-1. TypeScript CDK로 재사용가능한 모듈 구조 작성하기 - Stack Advanced (5편)</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/CICD/CDK/cdk-module-stack" class="nav-list-link">2-1. TypeScript CDK로 재사용가능한 모듈 구조 작성하기 - Stack (3편)</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/CICD/CodePipeline/codepipeline-sam-lambda" class="nav-list-link">2-1. AWS CodePipeline을 이용해 SAM으로 Lambda 배포하기</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/CICD/SAM/java-sam-lambda" class="nav-list-link">2-1. AWS SAM을 이용해 Lambda로 JAVA 어플리케이션 배포하기</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/CICD/Bamboo" class="nav-list-link">3. Bamboo</a> </li><li class="nav-list-item"> <a href="/docs/02_Tech/CICD/CDK" class="nav-list-link">6. CDK</a> </li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in CKA category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/02_Tech/IAC" class="nav-list-link">CKA</a><ul class="nav-list"></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in IAC category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/02_Tech/IAC" class="nav-list-link">IAC</a><ul class="nav-list"></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Project category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/03_Project" class="nav-list-link">Project</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/03_Project/Project_1_gitblog" class="nav-list-link">깃 블로그 만들기</a></li><li class="nav-list-item"><a href="/docs/03_Project/Project_2_ecs_pipeline" class="nav-list-link">Jenkins Pipeline - ECS</a></li><li class="nav-list-item"><a href="/docs/03_Project/Project_3_aws_exporter" class="nav-list-link">AWS Exporter Application 개발하기</a></li></ul></li><li class="nav-list-item"><a href="/" class="nav-list-link">Kimkm's 02_Tech Blog</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Just the Docs Template" aria-label="Search Just the Docs Template" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://github.com/just-the-docs/just-the-docs-template" class="site-button" > Template Repository </a> </li> </ul> </nav> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/docs/02_Tech">Tech</a></li> <li class="breadcrumb-nav-list-item"><a href="/docs/02_Tech/CICD">CICD</a></li> <li class="breadcrumb-nav-list-item"><span>1-3 Teams 배포 승인 메세지</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 class="no_toc" id="microsoft-teams에-jenkins-pipeline-배포-알림-및-승인-메세지-전송하기"> <a href="#microsoft-teams에-jenkins-pipeline-배포-알림-및-승인-메세지-전송하기" class="anchor-heading" aria-labelledby="microsoft-teams에-jenkins-pipeline-배포-알림-및-승인-메세지-전송하기"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Microsoft Teams에 Jenkins Pipeline 배포 알림 및 승인 메세지 전송하기 </h1> <p>젠킨슨 파이프라인을 통한 자동화된 배포 프로세스에서 관리자의 직접적인 승인이 필요할 때, Microsoft Teams를 통해 알림 및 승인 요청을 구현하는 방법에 대해 소개합니다.</p> <h2 class="no_toc text-delta" id="목차"> <a href="#목차" class="anchor-heading" aria-labelledby="목차"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 목차 </h2> <ol id="markdown-toc"> <li><a href="#글을-쓴-배경" id="markdown-toc-글을-쓴-배경">글을 쓴 배경</a></li> <li><a href="#글-요약" id="markdown-toc-글-요약">글 요약</a></li> <li><a href="#시작하기-전" id="markdown-toc-시작하기-전">시작하기 전</a></li> <li><a href="#1-teams-설정" id="markdown-toc-1-teams-설정">1. Teams 설정</a> <ol> <li><a href="#11-incoming-webhooks-생성" id="markdown-toc-11-incoming-webhooks-생성">1.1 Incoming webhooks 생성</a></li> <li><a href="#12-incoming-webhooks-이용-방법" id="markdown-toc-12-incoming-webhooks-이용-방법">1.2 Incoming Webhooks 이용 방법</a></li> </ol> </li> <li><a href="#2-lambda-설정" id="markdown-toc-2-lambda-설정">2. Lambda 설정</a></li> <li><a href="#21-lambda-함수-코드" id="markdown-toc-21-lambda-함수-코드">2.1 Lambda 함수 코드</a></li> <li><a href="#22-lambda-함수-상세-설명" id="markdown-toc-22-lambda-함수-상세-설명">2.2 Lambda 함수 상세 설명</a> <ol> <li><a href="#221-이벤트-데이터-처리" id="markdown-toc-221-이벤트-데이터-처리">2.2.1 이벤트 데이터 처리</a></li> <li><a href="#222-메시지-제목-생성" id="markdown-toc-222-메시지-제목-생성">2.2.2 메시지 제목 생성</a></li> <li><a href="#223-teams-메시지-페이로드-구성" id="markdown-toc-223-teams-메시지-페이로드-구성">2.2.3 Teams 메시지 페이로드 구성</a></li> <li><a href="#224-메세지-전송" id="markdown-toc-224-메세지-전송">2.2.4 메세지 전송</a></li> <li><a href="#225-응답-처리" id="markdown-toc-225-응답-처리">2.2.5 응답 처리</a></li> </ol> </li> <li><a href="#3-jenkins-구성" id="markdown-toc-3-jenkins-구성">3. Jenkins 구성</a> <ol> <li><a href="#31-플러그인을-활용하여-파이프라인-알림-메세지-보내기" id="markdown-toc-31-플러그인을-활용하여-파이프라인-알림-메세지-보내기">3.1 플러그인을 활용하여 파이프라인 알림 메세지 보내기</a> <ol> <li><a href="#311-office-365-connector-plugin-설치하기" id="markdown-toc-311-office-365-connector-plugin-설치하기">3.1.1 Office 365 Connector Plugin 설치하기</a></li> <li><a href="#312-office-365-connector-구성하기" id="markdown-toc-312-office-365-connector-구성하기">3.1.2 Office 365 Connector 구성하기</a></li> </ol> </li> <li><a href="#32-람다를-통해-커스텀-알림-메세지-구성하기" id="markdown-toc-32-람다를-통해-커스텀-알림-메세지-구성하기">3.2 람다를 통해 커스텀 알림 메세지 구성하기</a> <ol> <li><a href="#321-teams-젠킨슨-파이프라인-파일을-만들어-줍니다" id="markdown-toc-321-teams-젠킨슨-파이프라인-파일을-만들어-줍니다">3.2.1 Teams 젠킨슨 파이프라인 파일을 만들어 줍니다.</a></li> <li><a href="#322-teams-젠킨슨-파이프라인-코드-상세-설명" id="markdown-toc-322-teams-젠킨슨-파이프라인-코드-상세-설명">3.2.2 Teams 젠킨슨 파이프라인 코드 상세 설명</a> <ol> <li><a href="#3221-git-commit-id-추출" id="markdown-toc-3221-git-commit-id-추출">3.2.2.1 Git Commit ID 추출</a></li> <li><a href="#3222-사용자-정보-추출" id="markdown-toc-3222-사용자-정보-추출">3.2.2.2 사용자 정보 추출</a></li> <li><a href="#3223-aws-lambda-함수-호출" id="markdown-toc-3223-aws-lambda-함수-호출">3.2.2.3 AWS Lambda 함수 호출</a></li> <li><a href="#3224-사용자-입력-요청" id="markdown-toc-3224-사용자-입력-요청">3.2.2.4 사용자 입력 요청</a></li> </ol> </li> </ol> </li> </ol> </li> </ol><hr /> <h2 id="글을-쓴-배경"> <a href="#글을-쓴-배경" class="anchor-heading" aria-labelledby="글을-쓴-배경"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 글을 쓴 배경 </h2> <p>단순 자동화된 프로세스를 이용하는 것이 아닌 중요한 운영환경 배포 프로세스에서 관리자의 승인이 필요한 경우가 발생하였습니다.</p> <h2 id="글-요약"> <a href="#글-요약" class="anchor-heading" aria-labelledby="글-요약"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 글 요약 </h2> <p>이 글에서는 Jenkins, Microsoft Teams, 그리고 AWS Lambda를 사용하여 배포 프로세스 중 승인 메커니즘을 구현하는 방법에 대해 설명합니다.</p> <ul> <li><strong>Microsoft Teams</strong>: 알림을 수신할 채널 및 연결 설정 방법</li> <li><strong>AWS Lambda</strong>: Node.js 20x 를 사용하여 Teams 채널로 메세지를 보내는 lambda 함수 구성 방법</li> </ul> <h2 id="시작하기-전"> <a href="#시작하기-전" class="anchor-heading" aria-labelledby="시작하기-전"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 시작하기 전 </h2> <p>Jenkins와 AWS에 대한 사용 경험을 가진 DevOps 엔지니어를 대상으로 합니다. AWS Lambda에서 Node.js 20x를 사용하여 Teams 채널로 메시지를 보내는 프로세스에 대한 전반적인 이해가 필요합니다.</p> <p>참고 문헌 : <a href="https://learn.microsoft.com/en-us/microsoftteams/platform/webhooks-and-connectors/how-to/add-incoming-webhook?tabs=newteams%2Cdotnet#key-features-of-incoming-webhooks">Create Incoming Webhooks</a></p> <h2 id="1-teams-설정"> <a href="#1-teams-설정" class="anchor-heading" aria-labelledby="1-teams-설정"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1. Teams 설정 </h2> <h3 id="11-incoming-webhooks-생성"> <a href="#11-incoming-webhooks-생성" class="anchor-heading" aria-labelledby="11-incoming-webhooks-생성"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.1 Incoming webhooks 생성 </h3> <p>Teams 채널에 콘텐츠를 공유할 수 있게 하기 위해 Incoming Webhooks를 생성합니다. 이 기능을 활용해 Jenkins로부터의 배포 알림 및 승인 요청을 Teams 채널로 직접 보낼 수 있습니다.</p> <ol> <li> <p><strong>Teams에</strong> 접속하여 Incoming Webhook을 생성하고자 하는 채널로 이동합니다.</p> </li> <li> <p>채널 이름 오른쪽에 있는 ‘더 보기 옵션 •••’을 선택합니다.</p> </li> </ol> <p><img src="img-1.png" alt="img-1.png" /></p> <ol> <li><strong>Manage channel</strong>을 선택합니다.</li> </ol> <p><img src="img-2.png" alt="img-2.png" /></p> <ol> <li><strong>Edit</strong>을 선택한 후, <strong>Incoming Webhook</strong>을 찾아서 구성합니다. 이미 한번 추가하셨다면 Add가 아닌 Configure로 보여지게 됩니다.</li> </ol> <p><img src="img-3.png" alt="img-3.png" /></p> <p><img src="img-4.png" alt="img-4.png" /></p> <p><img src="img-5.png" alt="img-5.png" /></p> <ol> <li>Webhook에 <strong>Jenkins</strong>라고 이름을 지정하고 <strong>Create</strong>를 클릭합니다.</li> </ol> <p><img src="img-6.png" alt="img-6.png" /></p> <ol> <li><strong>Done</strong>을 클릭하면 이제 Webhook Url을 받아 사용할 수 있게 됩니다.</li> </ol> <p><img src="img-7.png" alt="img-7.png" /></p> <h3 id="12-incoming-webhooks-이용-방법"> <a href="#12-incoming-webhooks-이용-방법" class="anchor-heading" aria-labelledby="12-incoming-webhooks-이용-방법"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.2 Incoming Webhooks 이용 방법 </h3> <p>Incoming Webhooks를 통해 Teams 채널에 다음 기능을 포함한 메시지를 보낼 수 있습니다.</p> <ul> <li> <p><strong><a href="https://learn.microsoft.com/en-us/microsoftteams/platform/task-modules-and-cards/what-are-cards#adaptive-cards">Adaptive Cards</a></strong>: 복잡한 메시지 콘텐츠를 구성하며, 텍스트, 이미지, 버튼, 입력 필드 등 다양한 컴포넌트를 사용할 수 있습니다.</p> </li> <li> <p><strong>HTTPS 통신</strong>: HTTPS POST 요청을 통해 메시지를 전송합니다.</p> </li> <li> <p><strong>Markdown 지원</strong>: 기본 Markdown 문법을 지원합니다.</p> </li> <li> <p><strong>적용 범위 제한</strong>: 특정 Teams 채널에 대해서만 구성되며, 메시지 전송도 해당 채널로 한정됩니다.</p> </li> <li> <p><strong>리소스 정의 형식</strong>: 메시지는 JSON 형식으로 전송됩니다.</p> </li> </ul> <h2 id="2-lambda-설정"> <a href="#2-lambda-설정" class="anchor-heading" aria-labelledby="2-lambda-설정"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2. Lambda 설정 </h2> <p>AWS Lambda를 사용하여 Adaptive Card를 활용한 메시지를 Teams 채널로 보내는 함수를 구성합니다. 이 Lambda 함수는 Jenkins로부터 호출되어, Teams에 메시지를 전송하는 역할을 합니다.</p> <h2 id="21-lambda-함수-코드"> <a href="#21-lambda-함수-코드" class="anchor-heading" aria-labelledby="21-lambda-함수-코드"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2.1 Lambda 함수 코드 </h2> <p>아래 코드는 Node.js 20x를 사용한 Lambda함수입니다.</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">https</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">https</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">handler</span> <span class="o">=</span> <span class="k">async </span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">EVENT</span><span class="dl">"</span><span class="p">,</span> <span class="nx">event</span><span class="p">);</span>
    
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">jobName</span><span class="p">,</span> <span class="nx">jenkinsUrl</span><span class="p">,</span> <span class="nx">buildNumber</span><span class="p">,</span> <span class="nx">startTime</span><span class="p">,</span> <span class="nx">deployExecutor</span><span class="p">,</span> <span class="nx">gitRevision</span><span class="p">,</span> <span class="nx">environment</span><span class="p">,</span> <span class="nx">gitTagName</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">event</span><span class="p">;</span>

    <span class="kd">let</span> <span class="nx">messageTitle</span> <span class="o">=</span> <span class="nx">jobName</span><span class="p">.</span><span class="nf">substring</span><span class="p">(</span><span class="nx">jobName</span><span class="p">.</span><span class="nf">lastIndexOf</span><span class="p">(</span><span class="dl">"</span><span class="s2">-</span><span class="dl">"</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">).</span><span class="nf">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nf">toUpperCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">jobName</span><span class="p">.</span><span class="nf">substring</span><span class="p">(</span><span class="nx">jobName</span><span class="p">.</span><span class="nf">lastIndexOf</span><span class="p">(</span><span class="dl">"</span><span class="s2">-</span><span class="dl">"</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">).</span><span class="nf">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="nf">toLowerCase</span><span class="p">();</span>

    <span class="c1">// 변환된 문자열을 메시지 제목에 포함</span>
    <span class="nx">messageTitle</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="nx">messageTitle</span><span class="p">}</span><span class="s2"> API - Jenkins 배포 승인 알림 메세지`</span><span class="p">;</span>

    <span class="c1">// Teams Webhook URL</span>
    <span class="kd">const</span> <span class="nx">teamsWebhookUrl</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">TEAMS_WEBHOOK_URL</span><span class="p">;</span>

    <span class="c1">// Construct the JSON payload for Teams</span>
    <span class="kd">const</span> <span class="nx">teamsPayload</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nf">stringify</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">message</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">attachmentLayout</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">list</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">attachments</span><span class="dl">"</span><span class="p">:[</span>
               <span class="p">{</span>
                 <span class="dl">"</span><span class="s2">contentType</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/vnd.microsoft.card.adaptive</span><span class="dl">"</span><span class="p">,</span>
                 <span class="dl">"</span><span class="s2">content</span><span class="dl">"</span><span class="p">:</span> 
                 <span class="p">{</span>
                  <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">AdaptiveCard</span><span class="dl">"</span><span class="p">,</span>
                  <span class="dl">"</span><span class="s2">body</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                      <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Container</span><span class="dl">"</span><span class="p">,</span>
                      <span class="dl">"</span><span class="s2">style</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">emphasis</span><span class="dl">"</span><span class="p">,</span>
                      <span class="dl">"</span><span class="s2">items</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
                          <span class="p">{</span>
                          <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ColumnSet</span><span class="dl">"</span><span class="p">,</span>
                          <span class="dl">"</span><span class="s2">columns</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
                              <span class="p">{</span>
                              <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Column</span><span class="dl">"</span><span class="p">,</span>
                              <span class="dl">"</span><span class="s2">items</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
                                  <span class="p">{</span>
                                  <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">TextBlock</span><span class="dl">"</span><span class="p">,</span>
                                  <span class="dl">"</span><span class="s2">size</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">large</span><span class="dl">"</span><span class="p">,</span>
                                  <span class="dl">"</span><span class="s2">weight</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">bolder</span><span class="dl">"</span><span class="p">,</span>
                                  <span class="dl">"</span><span class="s2">text</span><span class="dl">"</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="nx">messageTitle</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span>
                                  <span class="dl">"</span><span class="s2">wrap</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                                  <span class="dl">"</span><span class="s2">style</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">heading</span><span class="dl">"</span>
                                  <span class="p">}</span>
                              <span class="p">],</span>
                              <span class="dl">"</span><span class="s2">width</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">stretch</span><span class="dl">"</span>
                              <span class="p">}</span>
                          <span class="p">]</span>
                          <span class="p">}</span>
                      <span class="p">],</span>
                      <span class="dl">"</span><span class="s2">bleed</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span>
                      <span class="p">},</span>
                      <span class="p">{</span>
                      <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ActionSet</span><span class="dl">"</span><span class="p">,</span>
                      <span class="dl">"</span><span class="s2">actions</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
                          <span class="p">{</span>
                          <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Action.OpenUrl</span><span class="dl">"</span><span class="p">,</span>          
                          <span class="dl">"</span><span class="s2">spacing</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">extraLarge</span><span class="dl">"</span><span class="p">,</span>
                          <span class="dl">"</span><span class="s2">title</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">View Approval Page</span><span class="dl">"</span><span class="p">,</span>
                          <span class="dl">"</span><span class="s2">url</span><span class="dl">"</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="nx">jenkinsUrl</span><span class="p">}</span><span class="s2">input/`</span>
                          <span class="p">}</span>
                      <span class="p">]</span>
                      <span class="p">},</span>
                      <span class="p">{</span>
                          <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Container</span><span class="dl">"</span><span class="p">,</span>
                          <span class="dl">"</span><span class="s2">items</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
                              <span class="p">{</span>
                              <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">FactSet</span><span class="dl">"</span><span class="p">,</span>
                              <span class="dl">"</span><span class="s2">spacing</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">exlarge</span><span class="dl">"</span><span class="p">,</span>
                              <span class="dl">"</span><span class="s2">facts</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
                                  <span class="p">{</span>
                                      <span class="dl">"</span><span class="s2">title</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Job name</span><span class="dl">"</span><span class="p">,</span>
                                      <span class="dl">"</span><span class="s2">value</span><span class="dl">"</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="nx">jobName</span><span class="p">}</span><span class="s2">`</span>
                                  <span class="p">},</span>
                                  <span class="p">{</span>
                                      <span class="dl">"</span><span class="s2">title</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Build number</span><span class="dl">"</span><span class="p">,</span>
                                      <span class="dl">"</span><span class="s2">value</span><span class="dl">"</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="nx">buildNumber</span><span class="p">}</span><span class="s2">`</span>
                                  <span class="p">},</span>
                                  <span class="p">{</span>
                                      <span class="dl">"</span><span class="s2">title</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Start time</span><span class="dl">"</span><span class="p">,</span>
                                      <span class="dl">"</span><span class="s2">value</span><span class="dl">"</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="nx">startTime</span><span class="p">}</span><span class="s2">`</span>
                                  <span class="p">},</span>
                                  <span class="p">{</span>
                                      <span class="dl">"</span><span class="s2">title</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Triggered by</span><span class="dl">"</span><span class="p">,</span>
                                      <span class="dl">"</span><span class="s2">value</span><span class="dl">"</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="nx">deployExecutor</span><span class="p">}</span><span class="s2">`</span>
                                  <span class="p">},</span>
                                  <span class="p">{</span>
                                      <span class="dl">"</span><span class="s2">title</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Git Revision</span><span class="dl">"</span><span class="p">,</span>
                                      <span class="dl">"</span><span class="s2">value</span><span class="dl">"</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="nx">gitRevision</span><span class="p">}</span><span class="s2">`</span>
                                  <span class="p">},</span>
                                  <span class="p">{</span>
                                      <span class="dl">"</span><span class="s2">title</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Environment</span><span class="dl">"</span><span class="p">,</span>
                                      <span class="dl">"</span><span class="s2">value</span><span class="dl">"</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="nx">environment</span><span class="p">}</span><span class="s2">`</span>
                                  <span class="p">},</span>
                                  <span class="p">{</span>
                                      <span class="dl">"</span><span class="s2">title</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Git Tag Name</span><span class="dl">"</span><span class="p">,</span>
                                      <span class="dl">"</span><span class="s2">value</span><span class="dl">"</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="nx">gitTagName</span><span class="p">}</span><span class="s2">`</span>
                                  <span class="p">}</span>
                              <span class="p">]</span>
                              <span class="p">}</span>
                          <span class="p">]</span>
                      <span class="p">}</span>
                  <span class="p">],</span>
                  <span class="dl">"</span><span class="s2">$schema</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">http://adaptivecards.io/schemas/adaptive-card.json</span><span class="dl">"</span><span class="p">,</span>
                  <span class="dl">"</span><span class="s2">version</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1.2</span><span class="dl">"</span><span class="p">,</span>
                  <span class="dl">"</span><span class="s2">fallbackText</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">This card requires Adaptive Cards v1.5 support to be rendered properly.</span><span class="dl">"</span>
                <span class="p">}</span>
                
               <span class="p">}</span>
             <span class="p">]</span>
           <span class="p">}</span>
    <span class="p">);</span>

    <span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
            <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">Content-Length</span><span class="dl">'</span><span class="p">:</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nf">byteLength</span><span class="p">(</span><span class="nx">teamsPayload</span><span class="p">),</span>
        <span class="p">}</span>
    <span class="p">};</span>

    <span class="c1">// Function to send message to Teams</span>
    <span class="kd">const</span> <span class="nx">sendMessageToTeams</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nc">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">https</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="nx">teamsWebhookUrl</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="kd">let</span> <span class="nx">body</span> <span class="o">=</span> <span class="dl">''</span><span class="p">;</span>
                <span class="nx">res</span><span class="p">.</span><span class="nf">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">data</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="nx">body</span> <span class="o">+=</span> <span class="nx">chunk</span><span class="p">;</span> <span class="p">});</span>
                <span class="nx">res</span><span class="p">.</span><span class="nf">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">end</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="nf">resolve</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span> <span class="p">});</span>
            <span class="p">});</span>

            <span class="nx">req</span><span class="p">.</span><span class="nf">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="nf">reject</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
            <span class="p">});</span>

            <span class="c1">// Send the JSON payload to Teams</span>
            <span class="nx">req</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="nx">teamsPayload</span><span class="p">);</span>
            <span class="nx">req</span><span class="p">.</span><span class="nf">end</span><span class="p">();</span>
        <span class="p">});</span>
    <span class="p">};</span>

    <span class="k">try</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nf">sendMessageToTeams</span><span class="p">();</span>
        <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Response:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">response</span><span class="p">);</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="na">statusCode</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>
            <span class="na">body</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Message sent to Teams successfully</span><span class="dl">'</span>
        <span class="p">};</span>
    <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Error:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="na">statusCode</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
            <span class="na">body</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Error sending message to Teams</span><span class="dl">'</span>
        <span class="p">};</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div> <h2 id="22-lambda-함수-상세-설명"> <a href="#22-lambda-함수-상세-설명" class="anchor-heading" aria-labelledby="22-lambda-함수-상세-설명"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2.2 Lambda 함수 상세 설명 </h2> <h3 id="221-이벤트-데이터-처리"> <a href="#221-이벤트-데이터-처리" class="anchor-heading" aria-labelledby="221-이벤트-데이터-처리"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2.2.1 이벤트 데이터 처리 </h3> <p>Lambda 함수는 Jenkins로부터 전달받은 custom event 객체에서 변수를 선언하면서, 필요한 정보를 추출합니다. custom event 객체에는 젠킨슨에서 배포와 관련된 상세 정보를 제공합니다. custom event 객체는 젠킨슨 파이프라인 단계에서 정의할 수 있습니다.</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="p">{</span> <span class="nx">jobName</span><span class="p">,</span> <span class="nx">jenkinsUrl</span><span class="p">,</span> <span class="nx">buildNumber</span><span class="p">,</span> <span class="nx">startTime</span><span class="p">,</span> <span class="nx">deployExecutor</span><span class="p">,</span> <span class="nx">gitRevision</span><span class="p">,</span> <span class="nx">environment</span><span class="p">,</span> <span class="nx">gitTagName</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">event</span><span class="p">;</span>
</code></pre></div></div> <h3 id="222-메시지-제목-생성"> <a href="#222-메시지-제목-생성" class="anchor-heading" aria-labelledby="222-메시지-제목-생성"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2.2.2 메시지 제목 생성 </h3> <p>메시지의 제목은 Jenkins 작업 이름(jobName)에서 결정됩니다. 단순하게 문자열로 정의하셔도 무방합니다.</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">messageTitle</span> <span class="o">=</span> <span class="nx">jobName</span><span class="p">.</span><span class="nf">substring</span><span class="p">(</span><span class="nx">jobName</span><span class="p">.</span><span class="nf">lastIndexOf</span><span class="p">(</span><span class="dl">"</span><span class="s2">-</span><span class="dl">"</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">).</span><span class="nf">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nf">toUpperCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">jobName</span><span class="p">.</span><span class="nf">substring</span><span class="p">(</span><span class="nx">jobName</span><span class="p">.</span><span class="nf">lastIndexOf</span><span class="p">(</span><span class="dl">"</span><span class="s2">-</span><span class="dl">"</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">).</span><span class="nf">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="nf">toLowerCase</span><span class="p">();</span>
<span class="nx">messageTitle</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="nx">messageTitle</span><span class="p">}</span><span class="s2"> API - Jenkins 배포 승인 알림 메세지`</span><span class="p">;</span>
</code></pre></div></div> <h3 id="223-teams-메시지-페이로드-구성"> <a href="#223-teams-메시지-페이로드-구성" class="anchor-heading" aria-labelledby="223-teams-메시지-페이로드-구성"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2.2.3 Teams 메시지 페이로드 구성 </h3> <p>배포 정보와 승인 페이지 링크를 포함하는 Adaptive Card 형식의 메시지를 구성합니다.</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">teamsPayload</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nf">stringify</span><span class="p">({</span>
    <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">message</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">attachmentLayout</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">list</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">attachments</span><span class="dl">"</span><span class="p">:</span> <span class="p">[{</span>
        <span class="dl">"</span><span class="s2">contentType</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/vnd.microsoft.card.adaptive</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">content</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
            <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">AdaptiveCard</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">body</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Container</span><span class="dl">"</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">style</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">emphasis</span><span class="dl">"</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">items</span><span class="dl">"</span><span class="p">:</span> <span class="p">[{</span>
                        <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ColumnSet</span><span class="dl">"</span><span class="p">,</span>
                        <span class="dl">"</span><span class="s2">columns</span><span class="dl">"</span><span class="p">:</span> <span class="p">[{</span>
                            <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Column</span><span class="dl">"</span><span class="p">,</span>
                            <span class="dl">"</span><span class="s2">items</span><span class="dl">"</span><span class="p">:</span> <span class="p">[{</span>
                                <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">TextBlock</span><span class="dl">"</span><span class="p">,</span>
                                <span class="dl">"</span><span class="s2">size</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">large</span><span class="dl">"</span><span class="p">,</span>
                                <span class="dl">"</span><span class="s2">weight</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">bolder</span><span class="dl">"</span><span class="p">,</span>
                                <span class="dl">"</span><span class="s2">text</span><span class="dl">"</span><span class="p">:</span> <span class="nx">messageTitle</span><span class="p">,</span>
                                <span class="dl">"</span><span class="s2">wrap</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                                <span class="dl">"</span><span class="s2">style</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">heading</span><span class="dl">"</span>
                            <span class="p">}],</span>
                            <span class="dl">"</span><span class="s2">width</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">stretch</span><span class="dl">"</span>
                        <span class="p">}]</span>
                    <span class="p">}],</span>
                    <span class="dl">"</span><span class="s2">bleed</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ActionSet</span><span class="dl">"</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">actions</span><span class="dl">"</span><span class="p">:</span> <span class="p">[{</span>
                        <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Action.OpenUrl</span><span class="dl">"</span><span class="p">,</span>
                        <span class="dl">"</span><span class="s2">title</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">View Approval Page</span><span class="dl">"</span><span class="p">,</span>
                        <span class="dl">"</span><span class="s2">url</span><span class="dl">"</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="nx">jenkinsUrl</span><span class="p">}</span><span class="s2">input/`</span>
                    <span class="p">}]</span>
                <span class="p">}</span>
                <span class="c1">// FactSet 및 기타 정보 추가</span>
            <span class="p">],</span>
            <span class="dl">"</span><span class="s2">$schema</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">http://adaptivecards.io/schemas/adaptive-card.json</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">version</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1.2</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">fallbackText</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">This card requires Adaptive Cards v1.5 support to be rendered properly.</span><span class="dl">"</span>
        <span class="p">}</span>
    <span class="p">}]</span>
<span class="p">});</span>
</code></pre></div></div> <h3 id="224-메세지-전송"> <a href="#224-메세지-전송" class="anchor-heading" aria-labelledby="224-메세지-전송"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2.2.4 메세지 전송 </h3> <p>구성된 메세지를 Teams Incoming Webhooks URL로 전송합니다. HTTPS POST 요청을 사용하며, 요청 성공 여부에 따라 응답코드를 반환합니다.</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
        <span class="dl">'</span><span class="s1">Content-Length</span><span class="dl">'</span><span class="p">:</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nf">byteLength</span><span class="p">(</span><span class="nx">teamsPayload</span><span class="p">),</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">sendMessageToTeams</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nc">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">https</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="nx">teamsWebhookUrl</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">body</span> <span class="o">=</span> <span class="dl">''</span><span class="p">;</span>
            <span class="nx">res</span><span class="p">.</span><span class="nf">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">data</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="nx">body</span> <span class="o">+=</span> <span class="nx">chunk</span><span class="p">;</span> <span class="p">});</span>
            <span class="nx">res</span><span class="p">.</span><span class="nf">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">end</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="nf">resolve</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span> <span class="p">});</span>
        <span class="p">});</span>

        <span class="nx">req</span><span class="p">.</span><span class="nf">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="nf">reject</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
        <span class="p">});</span>

        <span class="nx">req</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="nx">teamsPayload</span><span class="p">);</span>
        <span class="nx">req</span><span class="p">.</span><span class="nf">end</span><span class="p">();</span>
    <span class="p">});</span>
<span class="p">};</span>
</code></pre></div></div> <h3 id="225-응답-처리"> <a href="#225-응답-처리" class="anchor-heading" aria-labelledby="225-응답-처리"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2.2.5 응답 처리 </h3> <p>메시지 전송 성공 시 “Message sent to Teams successfully”와 상태 코드 200을 반환합니다. 오류 발생 시 오류 메시지와 상태 코드 500을 반환합니다.</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">try</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nf">sendMessageToTeams</span><span class="p">();</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Response:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">response</span><span class="p">);</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="na">statusCode</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>
        <span class="na">body</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Message sent to Teams successfully</span><span class="dl">'</span>
    <span class="p">};</span>
<span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Error:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="na">statusCode</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
        <span class="na">body</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Error sending message to Teams</span><span class="dl">'</span>
    <span class="p">};</span>
<span class="p">}</span>
</code></pre></div></div> <h2 id="3-jenkins-구성"> <a href="#3-jenkins-구성" class="anchor-heading" aria-labelledby="3-jenkins-구성"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3. Jenkins 구성 </h2> <p>Jenkins에서는 배포 알림 메세지를 Teams로 보내기 위해 <strong>Office 365 Connector</strong> 플러그인을 사용할 수도 있고 <strong>Lambda</strong>를 이용해 커스텀한 메세지를 보낼 수 있습니다.</p> <h3 id="31-플러그인을-활용하여-파이프라인-알림-메세지-보내기"> <a href="#31-플러그인을-활용하여-파이프라인-알림-메세지-보내기" class="anchor-heading" aria-labelledby="31-플러그인을-활용하여-파이프라인-알림-메세지-보내기"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3.1 플러그인을 활용하여 파이프라인 알림 메세지 보내기 </h3> <h4 id="311-office-365-connector-plugin-설치하기"> <a href="#311-office-365-connector-plugin-설치하기" class="anchor-heading" aria-labelledby="311-office-365-connector-plugin-설치하기"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3.1.1 Office 365 Connector Plugin 설치하기 </h4> <p><strong>메세지를 보낼 스테이지를 구성하기 위한 젠킨슨 잡을 생성합니다. 본 블로그는 pipeline project로 구성하였습니다.</strong></p> <p><img src="img-8.png" alt="img-8.png" /></p> <p><strong>젠킨슨 플러그인에서 Office 365 Connector을 설치합니다.</strong></p> <p><img src="img-9.png" alt="img-9.png" /></p> <p><strong>젠킨슨 job 구성에 Office 365 Connector이 새롭게 생성되었음을 확인합니다.</strong></p> <p><img src="img-10.png" alt="img-10.png" /></p> <h4 id="312-office-365-connector-구성하기"> <a href="#312-office-365-connector-구성하기" class="anchor-heading" aria-labelledby="312-office-365-connector-구성하기"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3.1.2 Office 365 Connector 구성하기 </h4> <p><strong>1. Notification webhooks 를 구성합니다.</strong></p> <ul> <li>URL - Teams channel 에서 발급받은 Incomming Webhook Url을 넣어줍니다.</li> <li>Name - 임의의 이름을 정해줍니다.</li> </ul> <p><strong>2. 고급 기능을 통해 빌드 상태에 따라 알림 메세지를 전송할 수 있습니다.</strong></p> <p><img src="img-12.png" alt="img-12.png" /></p> <p>Build status 설명</p> <p><img src="img-11.png" alt="img-11.png" /></p> <p><strong>3. Advanced Configuration을 구성합니다.</strong></p> <ul> <li><strong>Macros</strong> - 특정 조건이 만족될 때만 알림이 전송되도록 추가적인 조건을 정의합니다. <ul> <li>아래 예시는 checkout 스텝을 실행한 후 <code class="language-plaintext highlighter-rouge">env.GIT_BRANCH</code> 를 통해 가져온 브랜치 이름이 main인 경우만 알림을 보내겠다는 의미입니다.</li> </ul> <p><img src="jenkins-13.png" alt="jenkins-13.png" /></p> </li> <li><strong>Fact Definitions</strong> - Teams Channel로 보내는 메세지에 사용자 정의 정보를 추가할 수 있습니다. macros 뿐만아니라 Fact Definitons에서도 젠킨슨 파이프라인 내에 정의된 커스텀 변수 혹은 젠킨슨에서 제공해주는 환경변수 모두 사용 가능합니다. <ul> <li> <p>아래 예시는 알림 메시지에 현재 잡 빌드 번호를 추가하고 싶을 때 사용하는 방법입니다.</p> </li> <li> <p><img src="img-14.png" alt="img-14.png" /></p> </li> </ul> </li> <li><strong>Timeout</strong> - TCP와 HTTP 연결에 대한 타임아웃을 밀리초 단위로 설정합니다. 기본값은 30000 ( 30초 ) 입니다. 젠킨슨이 알림을 전송하는 데 걸리는 최대 시간을 뜻합니다.</li> </ul> <p><img src="img-15.png" alt="img-15.png" /></p> <h3 id="32-람다를-통해-커스텀-알림-메세지-구성하기"> <a href="#32-람다를-통해-커스텀-알림-메세지-구성하기" class="anchor-heading" aria-labelledby="32-람다를-통해-커스텀-알림-메세지-구성하기"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3.2 람다를 통해 커스텀 알림 메세지 구성하기 </h3> <p>Jenkins 파이프라인에서 커스텀 알림 메시지를 보낼 람다를 호출하는 스크립트를 작성하여 배포 승인 요청을 포함한 다양한 정보를 Teams 채널로 전송할 수 있습니다.</p> <h4 id="321-teams-젠킨슨-파이프라인-파일을-만들어-줍니다"> <a href="#321-teams-젠킨슨-파이프라인-파일을-만들어-줍니다" class="anchor-heading" aria-labelledby="321-teams-젠킨슨-파이프라인-파일을-만들어-줍니다"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3.2.1 Teams 젠킨슨 파이프라인 파일을 만들어 줍니다. </h4> <div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">stage</span><span class="o">(</span><span class="s1">'Invoke Teams Approval'</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">script</span> <span class="o">{</span>

        <span class="n">GIT_COMMIT_ID</span> <span class="o">=</span> <span class="n">sh</span><span class="o">(</span><span class="nl">returnStdout:</span> <span class="kc">true</span><span class="o">,</span> <span class="nl">script:</span> <span class="s1">'git rev-parse --short HEAD'</span><span class="o">).</span><span class="na">trim</span><span class="o">()</span>
        <span class="c1">// Git 커밋 ID를 가져오는 스크립트</span>
        <span class="n">echo</span> <span class="s2">"Git Commit ID =&gt; [${GIT_COMMIT_ID}]"</span>

        <span class="n">wrap</span><span class="o">([</span><span class="n">$class</span><span class="o">:</span> <span class="s1">'BuildUser'</span><span class="o">])</span> <span class="o">{</span>
            <span class="kt">def</span> <span class="n">user</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="na">BUILD_USER_ID</span>
            <span class="n">step</span><span class="o">([</span><span class="n">$class</span>                        <span class="o">:</span> <span class="s1">'LambdaInvokeBuildStep'</span><span class="o">,</span>
                  <span class="nl">lambdaInvokeBuildStepVariables:</span> <span class="o">[</span>
                          <span class="n">awsRegion</span>             <span class="o">:</span> <span class="s2">"${AWS_REGION}"</span><span class="o">,</span>
                          <span class="n">functionName</span>          <span class="o">:</span> <span class="s2">"${LAMBDA_FUNCTION_NAME}"</span><span class="o">,</span>
                          <span class="n">synchronous</span>           <span class="o">:</span> <span class="kc">true</span><span class="o">,</span>
                          <span class="nl">payload:</span> <span class="s2">"{ \"jobName\": \"${env.JOB_NAME}\", \"jenkinsUrl\": \"${env.BUILD_URL}\", \"buildNumber\": \"${env.BUILD_NUMBER}\", \"startTime\": \"${env.BUILD_TIMESTAMP}\", \"deployExecutor\": \"${user}\", \"gitRevision\": \"${GIT_COMMIT_ID}\", \"environment\": \"${ENV_TARGET}\", \"gitTagName\": \"${CONTAINER_IMAGE_TAG}\"}"</span><span class="o">,</span>
                          <span class="nl">useInstanceCredentials:</span> <span class="kc">true</span>
                  <span class="o">]</span>
            <span class="o">])</span>
        <span class="o">}</span>

        <span class="kt">def</span> <span class="n">userInput</span> <span class="o">=</span> <span class="n">input</span><span class="o">(</span>
                <span class="nl">id:</span> <span class="s1">'deploy-confirm'</span><span class="o">,</span>
                <span class="nl">message:</span> <span class="s1">'Deploy to production?'</span><span class="o">,</span>
                <span class="nl">ok:</span> <span class="s1">'Proceed'</span><span class="o">,</span>
                <span class="nl">submitter:</span> <span class="s1">'admin'</span><span class="o">,</span>
                <span class="nl">parameters:</span> <span class="o">[]</span>
        <span class="o">)</span>

    <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div> <h4 id="322-teams-젠킨슨-파이프라인-코드-상세-설명"> <a href="#322-teams-젠킨슨-파이프라인-코드-상세-설명" class="anchor-heading" aria-labelledby="322-teams-젠킨슨-파이프라인-코드-상세-설명"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3.2.2 Teams 젠킨슨 파이프라인 코드 상세 설명 </h4> <h5 id="3221-git-commit-id-추출"> <a href="#3221-git-commit-id-추출" class="anchor-heading" aria-labelledby="3221-git-commit-id-추출"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3.2.2.1 Git Commit ID 추출 </h5> <div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">GIT_COMMIT_ID</span> <span class="o">=</span> <span class="n">sh</span><span class="o">(</span><span class="nl">returnStdout:</span> <span class="kc">true</span><span class="o">,</span> <span class="nl">script:</span> <span class="s1">'git rev-parse --short HEAD'</span><span class="o">).</span><span class="na">trim</span><span class="o">()</span>
<span class="n">echo</span> <span class="s2">"Git Commit ID =&gt; [${GIT_COMMIT_ID}]"</span>
</code></pre></div></div> <h5 id="3222-사용자-정보-추출"> <a href="#3222-사용자-정보-추출" class="anchor-heading" aria-labelledby="3222-사용자-정보-추출"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3.2.2.2 사용자 정보 추출 </h5> <p>BuildUser 래퍼를 사용하여 현재 Jenkins 빌드를 트리거한 사용자의 ID를 가져옵니다.</p> <div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">wrap</span><span class="o">([</span><span class="n">$class</span><span class="o">:</span> <span class="s1">'BuildUser'</span><span class="o">])</span> <span class="o">{</span>
    <span class="kt">def</span> <span class="n">user</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="na">BUILD_USER_ID</span>
    <span class="o">...</span>
<span class="o">}</span>
</code></pre></div></div> <h5 id="3223-aws-lambda-함수-호출"> <a href="#3223-aws-lambda-함수-호출" class="anchor-heading" aria-labelledby="3223-aws-lambda-함수-호출"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3.2.2.3 AWS Lambda 함수 호출 </h5> <p>참고자료 : <a href="https://www.jenkins.io/doc/pipeline/steps/aws-lambda/">AWS Lamabda Plugin</a></p> <p><strong>LambdaInvokeBuildStep</strong> 은 AWS Lambda 함수를 관리하고 호출 할 수 있도록 해주는 플러그인입니다.</p> <p>그중 invokeLambda 메소드를 사용하여 람다를 호출하고 Lambda에게 전달할 EVENT JSON을 구성하고 전달합니다.</p> <p>synchronous 옵션을 통해 Lambda 함수를 동기식으로 호출합니다. Lambda 함수의 실행 결과를 기다리고 응답을 반환한 후 다음 단계로 넘어갈 수 있도록 합니다.</p> <div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code>            <span class="n">wrap</span><span class="o">([</span><span class="n">$class</span><span class="o">:</span> <span class="s1">'BuildUser'</span><span class="o">])</span> <span class="o">{</span>
                <span class="kt">def</span> <span class="n">user</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="na">BUILD_USER_ID</span>
                <span class="n">step</span><span class="o">([</span><span class="n">$class</span>                        <span class="o">:</span> <span class="s1">'LambdaInvokeBuildStep'</span><span class="o">,</span>
                      <span class="nl">lambdaInvokeBuildStepVariables:</span> <span class="o">[</span>
                              <span class="n">awsRegion</span>             <span class="o">:</span> <span class="s2">"${AWS_REGION}"</span><span class="o">,</span>
                              <span class="n">functionName</span>          <span class="o">:</span> <span class="s2">"${LAMBDA_FUNCTION_NAME}"</span><span class="o">,</span>
                              <span class="n">synchronous</span>           <span class="o">:</span> <span class="kc">true</span><span class="o">,</span>
                              <span class="nl">payload:</span> <span class="s2">"{ \"jobName\": \"${env.JOB_NAME}\", \"jenkinsUrl\": \"${env.BUILD_URL}\", \"buildNumber\": \"${env.BUILD_NUMBER}\", \"startTime\": \"${env.BUILD_TIMESTAMP}\", \"deployExecutor\": \"${user}\", \"gitRevision\": \"${GIT_COMMIT_ID}\", \"environment\": \"${ENV_TARGET}\", \"gitTagName\": \"${CONTAINER_IMAGE_TAG}\"}"</span><span class="o">,</span>
                              <span class="nl">useInstanceCredentials:</span> <span class="kc">true</span>
                      <span class="o">]</span>
                <span class="o">])</span>
            <span class="o">}</span>
</code></pre></div></div> <h5 id="3224-사용자-입력-요청"> <a href="#3224-사용자-입력-요청" class="anchor-heading" aria-labelledby="3224-사용자-입력-요청"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3.2.2.4 사용자 입력 요청 </h5> <p>참고자료 : <a href="https://www.jenkins.io/doc/pipeline/steps/pipeline-input-step/">Pipeline:Input Step</a></p> <p><strong>input step</strong> 은 Jenkins 파이프라인 실행을 일시 중지하고 사용자의 승인을 기다리게 해주는 플러그인입니다.</p> <p>사용자 입력을 기다리는 페이지가 호출되고 사용자에게는 “계속” 또는 “중단” 옵션이 보여지게 됩니다.</p> <p><img src="img-16.png" alt="img-16.png" /></p> <ul> <li>id - 파이프라인 내에 여러 input 스텝이 있을경우 명확히 관리할 수 있도록 사용합니다.</li> <li>submitter - 이 입력에 응답할 수 있는 사용자 ID와/또는 외부 그룹을 지정합니다.</li> </ul> <div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">def</span> <span class="n">userInput</span> <span class="o">=</span> <span class="n">input</span><span class="o">(</span>
        <span class="nl">id:</span> <span class="s1">'deploy-confirm'</span><span class="o">,</span>
        <span class="nl">message:</span> <span class="s1">'Deploy to production?'</span><span class="o">,</span>
        <span class="nl">ok:</span> <span class="s1">'Proceed'</span><span class="o">,</span>
        <span class="nl">submitter:</span> <span class="s1">'admin'</span><span class="o">,</span>
        <span class="nl">parameters:</span> <span class="o">[]</span>
<span class="o">)</span>
</code></pre></div></div> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
